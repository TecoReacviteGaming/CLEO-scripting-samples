{$CLEO .csi}

thread "Extract Data From File"
// Using modern CLEO opcode to do file reading and extract!

:main
wait 0 ms
if 0AAB:  file_exists "techvite\MyData.csv" // extensions can be anything, we use CSV since it's common for data extraction
jf @main
if 0A9A: 1@ = openfile "\files\techvite\MyData.csv" mode "rt" // IF and SET 
then
    0AC8: 0@ = allocate_memory_size 64 
    while 0AD7: read_string_from_file 1@ to 0@ size 64 //IF and SET 
        // Ignore comments
        0DD8: 6@ = read_mem_addr 0@ size 4 fix_ib 0 // android 
        000A: 6@ += 0x0 // Array of buffers, get first letter
        if and
            8039:   not 6@ == 0x23 // #
            8039:   not 6@ == 0x3B // ;
        jf continue
        
        // Extract data
        if 0AD4: 2@ = scan_string 0@ format "data %d, float %f, string %s" 3@ 4@ 5@v //IF and SET 
        then
            0AD1: show_formatted_text_highpriority "%d Data: %d %f %s" time 2000 2@ 3@ 4@ 5@v 
        end
    end
    0AC9: free_allocated_memory 0@ 
    0A9B: closefile 1@ 
else
    0AD1: show_formatted_text_highpriority "Failed to open" time 2000 
end
end_thread
